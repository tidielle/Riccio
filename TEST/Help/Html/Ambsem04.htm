<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>
<title> AM: Imap 4</title>
<LINK rel=stylesheet type=text/css href="style_topic.css">
<SCRIPT LANGUAGE="JavaScript">
<!-- Begin
loadImage1 = new Image();
loadImage1.src = "../images/help_home_Button_01_Roll-over.gif";
staticImage1 = new Image();
staticImage1.src = "../images/help_home_Button_01_Roll-out.gif";

loadImage2 = new Image();
loadImage2.src = "../images/help_home_Button_02_Roll-over.gif";
staticImage2 = new Image();
staticImage2.src = "../images/help_home_Button_02_Roll-out.gif";

loadImage3 = new Image();
loadImage3.src = "../images/help_home_Button_03_Roll-over.gif";
staticImage3 = new Image();
staticImage3.src = "../images/help_home_Button_03_Roll-out.gif";

loadImage4 = new Image();
loadImage4.src = "../images/help_home_Button_04_Roll-over.gif";
staticImage4 = new Image();
staticImage4.src = "../images/help_home_Button_04_Roll-out.gif";

// End -->
</SCRIPT>

</head>
<body lang=it topMargin=3>
<TABLE width=987 border=0><TR><TD vAlign=top align=right><p><code>Data ultimo aggiornamento: <A name=hINIeDATlAGGp></A>05/02/2014</FONT><A name=hFINeDATlAGGp></A></code></p></TD></TR></TABLE><TABLE cellSpacing=0 border=0><TR><TD colSpan=4><A href="http://www.ntsinformatica.it"><IMG border=0 alt="Clicca per accedere al sito di NTS Informatica" src="../images/help_home_banner.gif"></A></TD></TR></TABLE><TABLE cellSpacing=0 cellPadding=0 border=0><TR><TD align=left><A onmouseover="image1.src=loadImage1.src;" onmouseout="image1.src=staticImage1.src;" href="cose.htm"><IMG border=0 name=image1 alt="Clicca per accedere all'argomento" src="../images/help_home_Button_01_Roll-out.gif"></A></TD><TD align=center><A onmouseover="image2.src=loadImage2.src;" onmouseout="image2.src=staticImage2.src;" href="pc.htm"><IMG border=0 name=image2 alt="Clicca per accedere all'argomento" src="../images/help_home_Button_02_Roll-out.gif"></A></TD><TD align=center><A href="ambsargmod.htm"><IMG border=0 name=image3 alt="Clicca per accedere all'argomento" src="../images/help_home_Button_03_Roll-over.gif"></A></TD><TD align=right><A onmouseover="image4.src=loadImage4.src;" onmouseout="image4.src=staticImage4.src;" href="gaguidaan.htm"><IMG border=0 name=image4 alt="Clicca per accedere all'argomento" src="../images/help_home_Button_04_Roll-out.gif"></A></TD></TR><TR><TD colSpan=4><A href="http://www.ntsinformatica.it"><IMG border=0 alt="Clicca per accedere al sito di NTS Informatica" src="../images/help_home_Button_03_Roll-over-row.gif"></A></TD></TR><TR><TD bgColor=#009ee2 height=53 vAlign=middle width=987 colSpan=4 align=left><p><FONT class=title color=white size=6><b>Imap 4</b></FONT></p></TD></TR><TR><TD vAlign=middle colSpan=4 align=left></TD></TR></TABLE><TABLE width=987 border=0><TR><TD>
<p>Con il nuovo protocollo IMAP Business EMA è in grado di SINCRONIZZARSI con il server di posta esterno.</p>
<p>Con questa nuova modalità non si parla solo di 'scaricare la posta in arrivo', ma di fare in modo che business sia sincronizzato con il server di posta, ovvero le cartelle di Business, le e-mail inviate, ricevute, spostate saranno sempre sincronizzate con quelle del server di posta. Se si sposta una cartella sul server da IPAD/thunderbird/outlook, alla successiva sincronizzazione di Business con il server di posta la modifica verrà riversata anche in Bus.</p>
<p>Non sarà più possibile scaricare la posta e cancellarla dal server di posta esterno, perché alla successiva sincronizzazione verrà rimossa la posta anche da bus!</p>
<p>Visto che sul server IMAP potrebbero esserci tutta una serie di cartelle che non voglio sincronizzare con Business, è stata messa a disposizione l'opzione di registro BSEMGMAI\OPZIONI\ImapNoSync_indirizzoeemail dove come valori è possibile indicare le cartelle (e relative sottocartelle) che non devono essere sincronizzate con Business (separate da "|"). ATTENZIONE: il nome delle cartelle deve essere ESATTAMENTE come quello del server imap (occhio alle lettere accentate!!!!). Se non si vogliono sincronizzare SOLO le sottocartelle collegate alla cartella indicata, basta far precedere la cartella da un segno '-'.</p>
<p>Esempio</p>
<p>"<b>BSEMGMAI\OPZIONI\ImapNoSync_m.mengozzi@ntsinformatica.it"</b>
</p>
<p>con valore</p>
<p>
<b>"-Posta inviata/Archivio|Attivit&amp;AOA-|Calendario|Feed RSS|Diario|Contatti"</b>
</p>
<p>ATTENZIONE: nei nomi delle cartelle non sono ammessi caratteri come \ @ / . ( ) visto che le cartelle possono essere create anche con altri strumenti di gestione della posta, fare attenzione!!!!!</p>
<p>Per il passaggio dalla gestione EMA di bus da POP3 a IMAP, purtroppo non sarà possibile fare altro che cancellare le precedenti e-mail e ricreare l'ambiente. Questo è dovuto al fatto che i messaggi di posta di IMAP hanno un identificativo univoco diverso da quello di POP3, per cui non ci è possibile confrontare se una e-mail di POP3 è la stessa di IMAP e non vogliamo/possiamo avere e-mail doppie in bus.</p>
<p>Se si invia una e-mail da un client di posta che non è bus, quando si sincronizzerà con bus l'e-mail potrebbe venir comunque agganciata al lead in base all'indirizzo e-mail. Questa associazione non à possibile con offerte, documenti di magazzino, ecc... Per poterla ottenere l'unico sistema è inviare l'e-mail da bus.</p>
<p>
<b>Con questa funzionalità viene gestito il caso di quegli utenti che, per svariati motivi, non vogliono usare la consolle delle e-mail di Business perché preferiscono altri strumenti come outlook, thunderbird, ecc...</b>
</p>
<p>Una volta configurato il server di posta di Business, basta schedulare la sincronizzazione della posta con BNEMGMAI. In questo modo anche utilizzando altri client di posta in Business verranno archiviate e collegate le mai ai vari lead. Per poter sfruttare la funzionalità di Business di AGGANCIARE la mail ad offerte, documenti di magazzino, ... è sufficiente che le mail interessate vengano fatte partire dal programma di invio e-mail. Ovviamente da dentro business, quando di chiederà di vedere le mail associate al lead verrà comunque aperta la consolle e-mail di Business (e non il client di posta esterno!!!!)</p>
<p>NB: l'associazione avviene solo su indirizzi e-mail di clienti/fornitori/lead e rispettive organizzazioni della ditta a cui l'indirizzo e-mail dell'operatore di Business che si sta sincronizzando è collegato!!!!</p>
<p>Se al momento della sincronizzazione delle e-mail con il server imap in bus non è presente l'indirizzo e-mail in organig/clienti/fornitori/lead ma viene inserito in un secondo momento, alla successiva sincronizzazione viene eseguita una routine che cerca di 'riassociare' le e-mail che non sono collegate a lead/clienti/fornitori.</p>
<p>Visto che si parla di sincronizzazione, è ovvio che se si utilizza come protocollo IMAP la consolle delle mail di business può essere utilizzata solo quando si ha accesso ad internet e le varie operazioni di lettura mail non lette, cancellazione mail, spostamento tra cartelle saranno un po' più lente perché l'operazione PRIMA deve venir eseguita sul server IMAP, poi, se tutto è andato a buon fine, verrà eseguita l'operazione anche sugli archivi di Business.</p>
<p>Rispetto alla gestione con POP3, dove la struttura delle cartelle delle e-mail di Business è a discrezione dell'utente di Business, con IMAP la struttura delle cartelle è gestita dal server IMAP, per cui non è possibile definire un ordinamento delle cartelle 'a piacimento' in bus (ad esempio con GMAIL il cestito è nella sotto cartella [GMAIL], mentre posta in arrivo si chiama INBOX... SUBISCE QUESTO COMPORTAMENTO ANCHE THUNDERBIRD.</p>
<p>Cartella 'posta in uscita': è una cartella totalmente svincolata dalle cartelle IMAP. Probabilmente non è neanche presente tra le cartelle imap, visto che le mail sono in ricezione o inviate. La cartella 'posta in uscita' viene creata da Business e manutenuta in modo svincolato da imap. Il programma che invia le mail prima inserisce il messaggio in 'posta in uscita' e quando avrà la certezza che è stato inviato lo cancella perché questo messaggio ovviamente non avrà lo stesso ID di quello assegnato dal server imap, per cui alla successiva sincronizzazione della cartella 'posta inviata' verrebbe comunque cancellato e sostituito con quello scaricato dal server imap (si comportano nello stesso modo anche tutti i client di posta che utilizzano imap)</p>
<p>Cartella 'Archivio storico Business': è una cartella totalmente svincolata dalle cartelle IMAP. Lo scopo è quello di poter spostare dal server imap in locale in bus delle mail e successivamente rimuoverle dal server imap. Utile per chi usa server con limiti di spazio e/o vuol tenere sincronizzate solo alcune cartelle, mentre in locale vuole tenere tutta una serie di mail che NON DEVONO VENIRE PERSE!!!!</p>
<p>NB: una volta che una mail è stata spostata in 'Archivio storico Business' viene rimossa dal server IMAP e successivamente non sarà più possibile rispostarla in una cartella presente sul server imap, ma solo in una sua sottocartella!!!!</p>
<p>Sul server IMAP NON DEVE ESISTERE/NON DEVE ESSERE CREATA la cartella 'Archivio storico Business'!</p>
<p>
<i>
<u>Per gli account IMAP non è possibile scaricare una e-mail partendo dal suo ID, come avveniva per il POP3. Per risolvere il problema che impediva di generare il file di testo con l'e-mail, ora in caso di problemi il file viene generato in automatico, e viene indicata una e-mail nella cartella "archivio storico business" contenente il collegamento al file che potrà essere usato per trovare l'errore.</u>
</i>
</p>
<p>NB: la sincronizzazione TOTALE avviene solo avviando il programma 'BNEMGMAI'. Dalla consolle delle e-mail, facendo tasto DX sulla cartella, è stata aggiuntala voce di menu 'sincronizza con server di posta' (utilizzabile solo con IMAP, non con POP3) che fa fare una verifica/sincronizzazoine solo nella dir in cui si è (utile, ad esempio, per aggiornare la cartella 'posta in uscita' dopo che è stata inviata una mail per poterla successivamente spostare in un'altra cartella.</p>
<p>Rispetto a come fa POP3, che scarica tutta la posta dalla data ultimo download memorizzata su organig, IMAP scarica le mail se il checksum della cartella memorizzata in emaildir è diverso da quello del server imap e se il numero totale di e-mail nella cartella del server di posta è diverso dal numero totale di e-mail nella stessa cartelle di business. Per far riscaricare una certa dir basta azzerare emaildir.ed_imapchecksum</p>
<p>Ovviamente la prima sincronizzazione sarà MOLTO lenta, perché dovrà creare le cartelle e scaricare tutte le e-mail, oltre che dover identificare sul server quali sono le cartelle 'posta in arrivo', 'posta in uscita', 'cestino', 'bozze', 'posta inviata'. Tali particolari cartelle sono riconosciute in automatico dalla procedura e per un corretto funzionamento di Business email occorre che lato server ne esista solo una per tipologia:</p>
<ul>
<li>INBOX o POSTA RICEVUTA o POSTA IN ARRIVO
<li>POSTA IN USCITA
<li>CESTINO o TRASH o POSTA ELIMINATA
<li>BOZZE
<li>POSTA INVIATA o SEND o SENT</li>
</ul>
<p>CARTELLE:</p>
<p>In business sono gestiti al massimo 3 livelli di sottocartelle, mentre con server imap la possibilità di creare cartelle e sottocartelle non ha limiti. Se con strumenti esterni si creano sottocartelle oltre il 3° livello, ad esempio:</p>
<p>[GMAIL] 
<br>[GMAIL]\Posta inviata 
<br>[GMAIL]\Posta inviata\Archivio 
<br>[GMAIL]\Posta inviata\Archivio\Archivio_sotto</p>
<p>In business la rappresentazione sarà la seguente (in pratica i livelli sotto al 3° vengono 'appiattiti' al terzo):</p>
<p>
<IMG src="../images/help_ambsem04_01.jpg">
</p>
<p>Il loro funzionamento, comunque, è gestito correttamente.</p>
<p>La gestione delle cartelle/sottocartelle IMAP deve essere fatta con strumenti esterni (outlook, thunderbird, ...).</p>
<p>NB: per velocizzare le operazioni di sincronizzazione è bene che le mail vengano 'spalmate' su più cartelle/sottocartelle, visto che il programma di sincronizzazione, una volta che ha verificato che una dir è da riaggiornare, deve rileggere gli header di tutte le mail contenute in quella dir per verificare se sono allineate con bus!</p>
<p>
<b>ATTENZIONE: in business lo stesso indirizzo e-mail associato all'operatore di Business NON DEVE ESSERE utilizzato sia come IMAP che come POP3!</b>
</p>
<p>Nei normali server IMAP se si scrive una bozza di mail su un dispositivo, la si può ritrovare anche su altri dispositivi. In Business le bozze create con Business non sono visibili da altri dispositivi. Le bozze rimangono interne a Business fino a quando non vengono inviate. Per supportare questa funzionalità se si salva una mail senza inviarla, in business viene salvata nella cartella 'Bozze Business', cartella speciale che non dovrà essere presente sul server IMAP.</p>
<p>Sul server IMAP NON DEVE ESISTERE/NON DEVE ESSERE CREATA la cartella 'Bozze Business'!</p>
<p>Questa cartella verrà creata in automatico durante la sincronizzazione con server IMAP e non potrà essere cancellata. Non possono essere spostare mail da o verso la cartella 'Bozze Business'. Sotto questa cartella non possono essere create delle sottocartelle Le mail cancellate da 'Bozze Business' non vanno a finire nel cestino, ma vengono eliminate subito definitivamente.</p>
<p>Ad oggi IMAP è stato testato su exchange server e gmail.</p>
<p>
<b>Note:</b>
</p>
<ul>
<li>con IMAP non sarà più possibile, da consolle e-mail, spostare una e-mail da un account di posta ad un altro
<li>gestione delle bozze, le bozze rimangono solo sul server Business fino all'invio nella Dir speciale 'Bozze Business'</li>
</ul>
<p>
<b>Note sull'ambiente multiditta:</b>
</p>
<p>Attenzione potrebbe capitare in ambiente multiditta che effettuando la ricezione email su un account appena configurato, la ricezione email mostra di trovare e scaricare le email di tale account ma poi tutte le cartelle risultano vuote. Probabilmente lo stesso account è stato configurato su 2 utenti diversi su 2 ditte diverse (per esempio, Davide - Ord1 e Feder - Prova), quando si scaricano le e-mail la ricezione viene fatta per account di posta (e non per operatore) e vengono assegnate alla ditta del primo operatore trovato con quell'indirizzo e-mail configurato. 
<br>In questo caso tutte le e-mail scaricate per l'account mailditest@ntsinformatica.it sono disponibili sulla ditta PROVA, ma non su ORD1. 
<br>Business e-mail gestisce correttamente i casi in cui lo stesso operatore abbia lo stesso account configurato su ditte diverse, o che lo stesso account sia configurato su operatori diversi ma con la stessa ditta. 
<br>Il caso che è capitato in queste prove non era stato previsto, e, se possibile preferirei evitare di implementarlo (a meno di richiesta da parte di un cliente\partner) in quanto credo che richieda un intervento al codice di diverse ore per una funzionalità molto particolare che fin'ora non è mai stata richiesta.</p>
<p>Se il problema è interno si può risolvere: 
<br>1) Configurando l'account mailditest@ntsinformatica.it sulla stessa ditta ad entrambi gli operatori 
<br>2) Togliendo la configurazione da uno dei 2 operatori</p></code>
</TD></TR></TABLE><TABLE border=0 cellSpacing=0 cellPadding=0><TR><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/software-retail-negozi/"><IMG border=0 src="../images/help_home_01_Gestisci.gif"></A></TD><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/controllo-di-gestione/"><IMG border=0 src="../images/help_home_02_Controlla.gif"></A></TD><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/crm/"><IMG border=0 src="../images/help_home_03_Fidelizza.gif"></A></TD><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/analisi-dati-datawarehouse/"><IMG border=0 src="../images/help_home_04_DWH.gif"></A></TD><TD vAlign=center width=169 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/project-management/"><IMG border=0 src="../images/help_home_05_Gestisci.gif"></A></TD><TD vAlign=center width=146 align=right><IMG border=0 src="../images/help_home_NTS_logo_up.gif"></TD></TR><TR><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/logistica/"><IMG border=0 src="../images/help_home_06_Organizza.gif"></A></TD><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/customer-service/"><IMG border=0 src="../images/help_home_07_Gestisci.gif"></A></TD><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/produzione/"><IMG border=0 src="../images/help_home_08_Pianifica.gif"></A></TD><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/archiviazione-documenti/"><IMG border=0 src="../images/help_home_09_Archivia.gif"></A></TD><TD vAlign=center width=169 align=right><IMG border=0 src="../images/help_home_NTS_logo_down1.gif"></TD><TD vAlign=center width=146 align=right><A href="http://www.ntsinformatica.it"><IMG border=0 alt="Clicca per accedere al sito di NTS Informatica" src="../images/help_home_NTS_logo_down2.gif"></A></TD></TR><TR><TD width=987 colSpan=6><IMG border=0 src="../images/help_home_Line.gif"></TD></TR></TABLE></body></html>