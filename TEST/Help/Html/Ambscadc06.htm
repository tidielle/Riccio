<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>
<title> AM: Ribaltamenti della contabilità analitica duplice contabile</title>
<LINK rel=stylesheet type=text/css href="style_topic.css">
<SCRIPT LANGUAGE="JavaScript">
<!-- Begin
loadImage1 = new Image();
loadImage1.src = "../images/help_home_Button_01_Roll-over.gif";
staticImage1 = new Image();
staticImage1.src = "../images/help_home_Button_01_Roll-out.gif";

loadImage2 = new Image();
loadImage2.src = "../images/help_home_Button_02_Roll-over.gif";
staticImage2 = new Image();
staticImage2.src = "../images/help_home_Button_02_Roll-out.gif";

loadImage3 = new Image();
loadImage3.src = "../images/help_home_Button_03_Roll-over.gif";
staticImage3 = new Image();
staticImage3.src = "../images/help_home_Button_03_Roll-out.gif";

loadImage4 = new Image();
loadImage4.src = "../images/help_home_Button_04_Roll-over.gif";
staticImage4 = new Image();
staticImage4.src = "../images/help_home_Button_04_Roll-out.gif";

// End -->
</SCRIPT>

</head>
<body lang=it topMargin=3>
<TABLE width=987 border=0><TR><TD vAlign=top align=right><p><code>Data ultimo aggiornamento: <A name=hINIeDATlAGGp></A>10/11/2014</FONT><A name=hFINeDATlAGGp></A></code></p></TD></TR></TABLE><TABLE cellSpacing=0 border=0><TR><TD colSpan=4><A href="http://www.ntsinformatica.it"><IMG border=0 alt="Clicca per accedere al sito di NTS Informatica" src="../images/help_home_banner.gif"></A></TD></TR></TABLE><TABLE cellSpacing=0 cellPadding=0 border=0><TR><TD align=left><A onmouseover="image1.src=loadImage1.src;" onmouseout="image1.src=staticImage1.src;" href="cose.htm"><IMG border=0 name=image1 alt="Clicca per accedere all'argomento" src="../images/help_home_Button_01_Roll-out.gif"></A></TD><TD align=center><A onmouseover="image2.src=loadImage2.src;" onmouseout="image2.src=staticImage2.src;" href="pc.htm"><IMG border=0 name=image2 alt="Clicca per accedere all'argomento" src="../images/help_home_Button_02_Roll-out.gif"></A></TD><TD align=center><A href="ambsargmod.htm"><IMG border=0 name=image3 alt="Clicca per accedere all'argomento" src="../images/help_home_Button_03_Roll-over.gif"></A></TD><TD align=right><A onmouseover="image4.src=loadImage4.src;" onmouseout="image4.src=staticImage4.src;" href="gaguidaan.htm"><IMG border=0 name=image4 alt="Clicca per accedere all'argomento" src="../images/help_home_Button_04_Roll-out.gif"></A></TD></TR><TR><TD colSpan=4><A href="http://www.ntsinformatica.it"><IMG border=0 alt="Clicca per accedere al sito di NTS Informatica" src="../images/help_home_Button_03_Roll-over-row.gif"></A></TD></TR><TR><TD bgColor=#009ee2 height=53 vAlign=middle width=987 colSpan=4 align=left><p><FONT class=title color=white size=6><b>Ribaltamenti della contabilità analitica duplice contabile</b></FONT></p></TD></TR><TR><TD vAlign=middle colSpan=4 align=left></TD></TR></TABLE><TABLE width=987 border=0><TR><TD>
<p>I ribaltamenti nella CADC si basano sulla tabella dei drivers M-C-7, i drivers sono degli accumulatori di costo che poi possono essere ribaltati in base a:</p>
<ul>
<li>Teste - numero di risorse assegnate ad un centro, divisione, ... (ovviamente non è possibile ribaltare su tutti i tipi entità della CADC, ad esempio per l'entità articolo un ribaltamento con tipo drivers sulle teste non è possibile)
<li>MQ - metri quadri
<li>Totale sezione budget - il ribaltamento avviene in base al totale sezione, occorrerà in questo caso indicare il codice sezione budget nell'apposita colonna di griglia
<li>Voce budget - il ribaltamento avviene in base al totale voce, occorrerà in questo caso indicare il codice voce budget nell'apposita colonna di griglia
<li>Totale costi - totale dei costi dell'oggetto di destinazione
<li>Totale ricavi - totale dei ricavi dell'oggetto di destinazione
<li>Altro - da valori imputati dall'utente</li>
</ul>
<p>
<IMG src="../images/help_ambscadc06_01.jpg">
</p>
<p>La ripartizione per Teste, MQ e Altro deve essere dettagliata tramite il programma 'Dettaglio entità elementare per mese' presente in M-C-E.</p>
<p>
<IMG src="../images/help_ambscadc06_03.jpg">
</p>
<p>Dal programma notiamo che la ripartizione per Teste, MQ e Altro è disponibile solo per le seguenti tipologie:</p>
<ul>
<li>Divisione
<li>Stabilimento
<li>Centro di costo
<li>Commessa
<li>Linea</li>
</ul>
<p>Una volta definiti i driver e l'eventuale dettaglio per quelli di tipo Teste, MQ e Altro, possiamo tornare al programma degli schemi budget e vedere, come avevamo già accennato negli argomenti precedenti, che per le voci di tipo ribaltate possiamo specificare tramite il pulsante quali sono i driver che devono affluire nella voce. Nell'esempio vediamo che come drivers IN ENTRATA per la voce CENT-QSER abbiamo COSIMMOB (costi dell'immobile ind.) e COSTSEV (costi servizi interni da rib.).</p>
<p>
<IMG src="../images/help_ambscadc06_02.jpg" width=987>
</p>
<p>Per indicare quali conti confluiscono in quei driver di ribaltamento, occorre definire in un altro schema budget (vedere immagine sotto) specificando ne il driver IN USCITA e il dettaglio dei conti di CA che vanno ad alimentarlo.</p>
<p>
<IMG src="../images/help_ambscadc06_04.jpg" width=987>
</p>
<p>Business al momento in cui dovrà fare i ribaltamenti, andrà a prendere tutte le voci dei i budget che hanno come driver di uscita COSIMMOB e ne aggregherà tutti i costi dei conti specificati, poi prende tutte le voci dei i budget che hanno come drivers in entrata sempre COSIMMOB, ne calcola il totale teste, MQ, fatturato, ... in base tipo di driver di ripartizione e poi lo ripartisce in base a questo.</p>
<p>Per esempio, apriamo e settiamo nel seguente modo il programma dei ribaltamenti:</p>
<p>
<IMG src="../images/help_ambscadc06_05.jpg">
</p>
<p>Poi inseriamo direttamente dal programma di prima nota da CA un registrazione sul conto 24010001 (ammortamenti impianti) per il centro 27 di 50.000€ per i mesi di Gennaio e Febbraio 2012, lanciando poi la maschera della generazione ribaltamenti precedentemente settata otterremo:</p>
<p>
<IMG src="../images/help_ambscadc06_08.jpg" width=987>
</p>
<p>
<IMG src="../images/help_ambscadc06_09.jpg" width=987>
</p>
<p>Gli importi così ribaltati ad esempio sul centro 14 (confezionamento):</p>
<p>12.757,20 + 11.934,16 = 24.691,36</p>
<p>li ritroveremo nella stampa budget/consuntivo:</p>
<p>
<IMG src="../images/help_ambscadc06_11.jpg" width=987>
</p>
<p>Le logiche di ribaltamento indicate: driver IN USCITA -&gt; RIPARTIZIONE -&gt; drivers IN ENTRATA si compone in 3 livelli, così come è possibile notarlo la momento del lancio della generazione dei ribaltamenti:</p>
<p>1° step) elaborazione e generazione dei ribaltamenti da centri ausiliari a comuni e principali</p>
<p>2° step) elaborazione e generazione dei ribaltamenti da centri comuni a principali</p>
<p>3° step) elaborazione e generazione dei ribaltamenti da centri principali a entità (linee, articoli, commesse, ...)</p>
<p>
<b>
<u>
<i>Note sui ribaltamenti</i>
</u>
</b>
</p>
<p>Il programma di generazione ribaltamenti genera prima la tabella CACOEFCDC con gli importi da ribaltare, poi li ribalta nella tabella CAPESIDR. Il programma della stampa budget/consuntivi legge CAPESIDR.</p>
<p>Per alimentare CACOEFCDC da budget vengono letti i budget di centro (solo quelli di centro) distinguendo tra AUSILIARI, COMUNI e PRINCIPALI. Vengono prese solo le righe di budget con driver impostato e con tipo riga diverso da 'totale progressivo', 'totale di gruppo' e 'solo visualizzare', raggruppando per ditta/centro/mese/anno.</p>
<p>Per alimentare CACOEFCDC da consuntivo viene letta la tabella di prima nota di CADC ripartita per mese PRIA2COMP collegata agli schemi budget in base ai link dei sottoconti di CA con gli schemi. Vengono sommate quantità ed importi e raggruppate per ditta/centro/mese/anno. Vengono ignorari i movimenti di CA collegati a schemi budget ti tipo 'totale progressivo', 'totale di gruppo' e 'solo visualizzare'.</p>
<p>La tabella CACOEFCDC viene alimentato anche da CAPESIDR, per tener conto dei ribaltamenti fatti da centri più alti (ad esempio da comuni a principali, quando ribalto i principali devo tener conto anche dei ribaltamenti ricevuti dai comuni).</p>
<p>Per il fatto che Business blocca l'indicazione di commesse, linee, famiglie, stabilimenti, divisioni, clienti, articoli se si indica un centro NON PRINCIPALE, quando business determina gli importi da ribaltare a partire dai centri principali devo distinguere quali importi sono già confluiti in commesse/divisioni/ecc. Questo perché quando ribalterò da principali a linee dovrò considerare gli importi dei centri principali assegnati anche a commesse in fase di inserimento registrazione in prima nota di CADC, ma dovrò scartare i movimenti dove avevo indicato sulla riga di prima nota di CADC sia il centro principale che le linee. Questo problema esiste solo quando si analizza il consuntivo e solo quando si parte dai centri principali.</p>
<p>Per schemi budget di tipo articolo/cliente/raggruppam. budget non posso utilizzare driver di tipo TESTE/MQ/ALTRO, ma solo totale sottoconto e/o totale codice raggruppamento sezione.</p>
<p>Quando si esegue il programma che genera i ribaltamenti, se si elabora anche il preventivo aggiorna i budget con il risultato dei ribaltamenti. In questo modo quando la stampa budget consuntivi deve stampare i dati a preventivo, per i ribaltamenti legge semplicemente dal budget, senza dover fare altre query su CAPESIDR (che verrà letto solo per alimentare il consuntivo).</p>
<p>Nel programma che genera i ribaltamenti i ricavi sono visti con importi negativi, quando questi poi dovranno essere girati a budget e/o consuntivo sarà il programma a moltiplicare per -1 in base al flag Dare/Avere impostato sulle varie righe di dettaglio dello schema budget.</p>
<p>NB: attualmente non è possibile gestire i driver a QUANTITA', ma solo a valore. Questo è dovuto al fatto che uno degli elementi necessari per effettuare il calcolo del ribaltamento sarebbe, oltre la valore, anche la quantità indicata all'interno di ogni singola registrazione, ma ad oggi in caso di registrazioni con data inizio/fine comprendenti più mesi la 'ripartizione' dell'importo tra mesi viene fatta solo per valore (e non per la quantità).</p>
<p>
<b>
<i>
<u>Cenamesi e driver (da Net 2013 SR1 o Net2012 SR5)</u>
</i>
</b>
</p>
<p>Oggi, una volta ottenuti gli importi da ribaltare, in base al driver vengono ribaltati gli importi su centro/linea/articolo/... in base a quanto definito sul driver come sorgente numerica (teste, MQ, altro, totale costi, ecc).</p>
<p>Se si imposta un driver su TESTE o MQ o ALTRO i numeri sono indicati sono dettagliati per CENTRO o LINEA o COMMESSA o .... Ma non per driver, ovvero quello che non si riesce ad ottenere è la possibilità di parametrizzare le TESTE, MQ, ALTRO per CENTRO/DRIVER (chiave doppia), visto che oggi anche se ho 2 driver di tipo TESTE i numeri indicabili per le TESTE sono comuni ad entrambi i driver.</p>
<p>Con la nuova opzione di registro BSCXCNME /OPZIONI/MultiDriverCenamesi = -1 si da la possibilità di specificare le teste/mq/altro per CENTRO/DRIVER (o linea/driver, commessa/driver, ...). Con attivata la nuova opzione di registro non è possibile avere in CENAMESI righe senza driver (ovvero se abilitata l'opzione il programma che genera i ribaltamenti cercherà sempre le teste/mq/altro per centro/driver; se l'opzione non è abilitata verrà eseguita una ricerca sempre e solo per centro (e driver = '').</p>
<p>Da Business 2012 sr5 è possibile indicare per lo stesso centro valori di parametri differenti in base al driver indicato. Per poter gestire questa casistica è necessario impostare la seguente opzione di registro BSCXCNME/OPZIONI/MultiDriverCenamesi (0/-1, default 0) a -1. In questo caso è obbligatorio indicare nel programma'Dettaglio entità elementare per mese'il DRIVER a cui l'indicazione di TESTE/MQ/ALTRO si riferisce relativamente a centro/linea/commessa/.... Per chi vuole passare dal sistema con opzione 0 (ante modifica) a -1 è necessario PRIMA DI CAMBIARE L'OPZIONE DI REGISTRO cancellare tutti i record dalla tabella CENAMESI.</p>
<p>Attivando l'opzione di registro a -1 la tabella 'Dettaglio entità elementare per mese' può essere compilata, per esempio, nel seguente modo:</p>
<p>
<IMG src="../images/help_Ambscadc06_06.jpg">
</p>
<p>Per lo stesso centro è, quindi, possibile indicare valori diversi in base al driver di ribaltamento indicato. In questo modo in fase di ribaltamenti i pesi di ripartizione per lo stesso centro differiscono in base al driver di ribaltamento.</p>
<p>
<IMG src="../images/help_Ambscadc06_07.jpg" width=987>
</p>
<p>
<b>
<i>
<u>Business NET 2015: CA DC con ribaltamenti a QTA oltre che a valore</u>
</i>
</b>
</p>
<p>Da questa versione è gestita la possibilità di effettuare ribaltamenti in base alla QTA (con la precedenza era possibile effettuare ribaltamenti solo in base al valore). Rimangono esclusi dalla modifica, ovviamente, driver di ribaltamento di tipo TESTE, MQ, ALTRO. ATTENZIONE: la possibilità di ribaltare gli importi in base non al valore, ma in base alla quantità, effettua nessun controllo sul fatto che le quantità potrebbero contenere dati non omogenei (metri, kg, ore, ecc...).</p>
<p>Nel passaggio da versioni precedenti già avviate, far ricreare pria2comp; come? Lanciare manualmente la stored procedure creata appositamente 'bussp_ricreapria2comp' (non è possibile far lanciare la stored procedure da Busadmintools perché dopo la creazione della stessa non viene eseguito nessun evento che esegue query memorizzate in BCQUERY).</p>
<p>Stampa budget/consuntivi prende la quantità ripartita per mese, se spuntato di prendere costi/ricavi già ripartiti per mese, prima prendeva sempre tutta la quantità indicata in priana2. NB : SE SI RISTAMPANO BUSGET/CONSUNTIVI VECCHI LA QTA A CONSUNTIVO, IN STAMPA, POTREBBE ESSERE DIVERSA DA QUELLA DELL'ELABORAZIONE LANCIATA PRIMA DELLA NET 2015!</p>
<p>Nella tabella driver di ribaltamento è stata abilitata la colonna che permette di indicare se il driver lavora su VALORI o QUANTITA'. Tale colonna viene utilizzata solo per driver diversi da TESTE, MQ, ALTRO. Nei ribaltamenti è gestita la possibilità di ribaltare in base alla quantità (in precedenza era gestito solo il ribaltamento per valore).</p>
</TD></TR></TABLE><TABLE border=0 cellSpacing=0 cellPadding=0><TR><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/software-retail-negozi/"><IMG border=0 src="../images/help_home_01_Gestisci.gif"></A></TD><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/controllo-di-gestione/"><IMG border=0 src="../images/help_home_02_Controlla.gif"></A></TD><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/crm/"><IMG border=0 src="../images/help_home_03_Fidelizza.gif"></A></TD><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/analisi-dati-datawarehouse/"><IMG border=0 src="../images/help_home_04_DWH.gif"></A></TD><TD vAlign=center width=169 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/project-management/"><IMG border=0 src="../images/help_home_05_Gestisci.gif"></A></TD><TD vAlign=center width=146 align=right><IMG border=0 src="../images/help_home_NTS_logo_up.gif"></TD></TR><TR><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/logistica/"><IMG border=0 src="../images/help_home_06_Organizza.gif"></A></TD><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/customer-service/"><IMG border=0 src="../images/help_home_07_Gestisci.gif"></A></TD><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/produzione/"><IMG border=0 src="../images/help_home_08_Pianifica.gif"></A></TD><TD vAlign=center width=168 align=middle><A href="http://www.ntsinformatica.it/software-erp-medie-imprese/software-erp/archiviazione-documenti/"><IMG border=0 src="../images/help_home_09_Archivia.gif"></A></TD><TD vAlign=center width=169 align=right><IMG border=0 src="../images/help_home_NTS_logo_down1.gif"></TD><TD vAlign=center width=146 align=right><A href="http://www.ntsinformatica.it"><IMG border=0 alt="Clicca per accedere al sito di NTS Informatica" src="../images/help_home_NTS_logo_down2.gif"></A></TD></TR><TR><TD width=987 colSpan=6><IMG border=0 src="../images/help_home_Line.gif"></TD></TR></TABLE></body></html>